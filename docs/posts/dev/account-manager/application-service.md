---
outline: [2, 4]
---

# アプリケーションサービス

ここからは実際にアプリケーションサービスを実装してみようと思います。
まずは、ユースケース記述を持ってこようと思います。

## ユースケース

> **基本コース**
> 
> 管理者は、従業員一覧画面にある『追加』ボタンをクリックする。システムは登録画面を表示する。ユーザーは
> 
> * 従業員名
> * メールアドレス
> * 権限
>
> これらを入力する。管理者は『登録する』をクリックする。
>
> システムは、フォームの入力内容を受け取る。システムは、下記バリデーションを実施する
>
> * 従業員名：入力必須、文字列、1文字以上20文字以内
> * メールアドレス：入力必須、メールアドレス、1文字以上100文字以内
> * 権限：入力必須、文字列、管理者、従業員、閲覧者のどれか
>
> その後、システムはメールアドレス重複がないか、データベースに問い合わせる
> 
> システムは従業員データを保存する。システムは完了画面を表示する。
>
> **代替コース**
> 
> * ログインしていない場合 : ログイン画面にリダイレクト
> * バリデーションエラー：再度入力させる
> * すでにメールアドレスが登録されている場合 : 再度入力させる

ここで、

> システムはメールアドレス重複がないか

という記載をしています。これを命ずるための場所と、

> システムは従業員データを保存する

これを命ずる場所を作ってあげるところから始めようと思います。

最初は従業員ドメインオブジェクトに作ろうと思ったのですが、

```php
<?php
$user = new User();

$user->create();
```

みたいになると、ユーザー自身に作成しろと命じていたり

```php
<?php
$user = new User();

$exist = $user->existByEmail();
```

みたいにユーザー自身に存在するか否かを命ずる形になってしまい、なんか変だなと思ったので、

* ドメインサービス
* リポジトリ

この辺を作っていきます。

なお、この辺も

* 